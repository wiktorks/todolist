{% extends 'employees/base.html' %} 
{% load static %}

{% block css_files %}
<link rel="stylesheet" href="{% static "employees/css/employees.css" %}">
{% endblock css_files %}

{% block content %}
{% url 'task-create' employee.pk as create_url %}

{% include "employees/partials/create_modal.html" with form_title="Create new task" %}
{% include "employees/partials/employee_nav.html" with type="tasks" %}
<div class="table-responsive">
  <table class="table table-hover table-sm">
    <thead class="">
      <tr>
        <th scope="col"></th>
        <th scope="col">Description</th>
        <th scope="col">Status</th>
        <th scope="col">Category</th>
        <th scope="col">Due date</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for task in task_list %}
      {% include "employees/partials/confirm_modal.html" %}
      <tr class="clickable-row" data-href="{% url 'employee-details' employee.pk %}">
        <th scope="row"><input type="checkbox" name="task-completed" id=""></th>
        <td>{{ task.description }}</td>
        <td>{{ task.status }}</td>
        <td>{{ task.category }}</td>
        <td>
          {{ task.planned_end_date|date:"M j" }}
        </td>
        <td>
          <button
            type="button"
            class="btn btn-danger btn-sm"
            data-toggle="modal"
            data-target="#confirmModal{{ forloop.counter }}"
          >
            Usuń
          </button>
        </td>
      </tr>
      {% empty %}
        <p>Ten pracownik nie ma tasków. Dodaj nowy</p>
      {% endfor %}
    </tbody>
  </table>
</div>
</div>
<button 
  type="button" 
  class="btn btn-success fixed-bottom button-add" 
  data-toggle="modal" 
  data-target="#createModal"
>
  <i class="bi bi-plus-circle-fill"></i> Utwórz taska
</button>
{% endblock content %}

{% block js_files %}
{% endblock js_files %}