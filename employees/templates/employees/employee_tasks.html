{% extends 'employees/base.html' %} 
{% load static %}

{% block css_files %}
<link rel="stylesheet" href="{% static "employees/css/employees.css" %}">
{% endblock css_files %}

{% block content %}
{% url 'task-create' employee.pk as create_url %}

{% include "employees/partials/create_modal.html" with form_title="Create new task" %}
{% include "employees/partials/employee_nav.html" with type="tasks" %}
<div class="container">
  <div class="row">
    
  </div>
</div>
<div class="table-responsive">
  <table class="table table-hover table-sm">
    <thead>
      <tr>
        <th scope="col" style="width: 5%">Ukończone</th>
        <th scope="col" style="width: 50%">Opis</th>
        <th scope="col" style="width: 15%">Status</th>
        <th scope="col" style="width: 15%">Kategoria</th>
        <th scope="col" style="width: 15%">Termin</th>
        <th scope="col">Opcje</th>
      </tr>
    </thead>
    <tbody>
      {% for task in task_list %}
      {% include "employees/partials/confirm_modal.html" %}
      <tr>
        <th scope="row">
          <input type="checkbox" name="task-completed-{{ task.pk }}" class="task-completed" id="{{ task.pk }}" {% if task.is_completed %}checked{% endif %}>
        </th>
        <td>{{ task.description }}</td>
        <td>{{ task.status }}</td>
        <td>{{ task.category }}</td>
        <td>
          {{ task.planned_end_date|date:"M j" }}
        </td>
        <td>
          <button
            type="button"
            class="btn btn-danger btn-sm"
            data-toggle="modal"
            data-target="#confirmModal{{ forloop.counter }}"
          >
            Usuń
          </button>
        </td>
      </tr>
      {% empty %}
      <tr>
        
        <td colspan="4">
          <p>Ten pracownik nie ma tasków. Dodaj nowy</p>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
</div>
<button 
  type="button" 
  class="btn btn-success fixed-bottom button-add" 
  data-toggle="modal" 
  data-target="#createModal"
>
  <i class="bi bi-plus-circle-fill"></i> Utwórz taska
</button>
{% endblock content %}

{% block js_files %}
<script src="{% static "employees/js/main.js" %}"></script>
{% endblock js_files %}